<div class="home-container">

  <section class="status-grid" [class.visible]="showContent">

    <!-- Music Card -->
    <div class="card music-card" [class.loaded]="!!musicData">
      <ng-container *ngIf="musicData">
        <div class="card-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 18V5l12-2v13"></path>
            <circle cx="6" cy="18" r="3"></circle>
            <circle cx="18" cy="16" r="3"></circle>
          </svg>
        </div>
        <div class="card-content">
          <span class="label">
            {{ musicData.isPlaying ? 'Şu an Dinliyor' : 'Son Dinlenen' }}
            <span *ngIf="musicData.isPlaying" class="equalizer">
              <span></span><span></span><span></span>
            </span>
          </span>
          <h3 class="title text-truncate">{{ musicData.song }}</h3>
          <p class="subtitle">{{ musicData.artist }}</p>
        </div>
      </ng-container>
    </div>

    <!-- Steam Card -->
    <div class="card steam-card" [class.loaded]="!!steamData"
      [style.backgroundImage]="steamData?.headerImage ? 'url(' + steamData.headerImage + ')' : null"
      [class.has-image]="steamData?.headerImage">
      <ng-container *ngIf="steamData">
        <div class="card-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="6" y1="12" x2="10" y2="12"></line>
            <line x1="8" y1="10" x2="8" y2="14"></line>
            <line x1="15" y1="13" x2="15.01" y2="13"></line>
            <line x1="18" y1="11" x2="18.01" y2="11"></line>
            <rect x="2" y="6" width="20" height="12" rx="2"></rect>
          </svg>
        </div>
        <div class="card-content">
          <span class="label">{{ steamData.status === 'Oynuyor' ? 'Şu an Oynuyor' : steamData.status }}</span>
          <h3 class="title text-truncate">{{ steamData.game }}</h3>
          <p class="subtitle" *ngIf="steamData.status === 'Oynuyor'">Steam</p>
          <p class="subtitle" *ngIf="steamData.status !== 'Oynuyor'">Son Oynanan</p>
        </div>
      </ng-container>
    </div>

    <!-- Project Card -->
    <!-- Not: 'a' tag olduğu için href varsa tıklanabilir olacak, ama opacity 0 iken pointer-events:none ile bunu engelleyeceğiz. -->
    <a [href]="latestProject?.githubUrl || latestProject?.link || '/projects'"
      [attr.target]="latestProject?.githubUrl ? '_blank' : null" class="card project-card hover-effect"
      [style.backgroundImage]="latestProject?.imageUrl ? 'url(' + latestProject?.imageUrl + ')' : null"
      [class.has-image]="latestProject?.imageUrl" [class.loaded]="!!latestProject">
      <ng-container *ngIf="latestProject">
        <div class="card-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
          </svg>
        </div>
        <div class="card-content">
          <span class="label">Son Proje</span>
          <h3 class="title text-truncate">{{ latestProject.title }}</h3>
          <p class="subtitle">{{ latestProject.technologies.join(', ') }}</p>
        </div>
      </ng-container>
    </a>

    <!-- Blog Card -->
    <a [routerLink]="latestBlog ? ['/blog', latestBlog.id] : '/blog'" class="card blog-card hover-effect"
      [style.backgroundImage]="latestBlog?.imageUrl ? 'url(' + latestBlog?.imageUrl + ')' : null"
      [class.has-image]="latestBlog?.imageUrl" [class.loaded]="!!latestBlog">
      <ng-container *ngIf="latestBlog">
        <div class="card-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
            <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
            <path d="M2 2l7.586 7.586"></path>
            <circle cx="11" cy="11" r="2"></circle>
          </svg>
        </div>
        <div class="card-content">
          <span class="label">Son Yazı</span>
          <h3 class="title text-truncate">{{ latestBlog.title }}</h3>
          <p class="subtitle">{{ latestBlog.publishDate | date:'mediumDate' }}</p>
        </div>
      </ng-container>
    </a>

  </section>

  <section class="hero-section">
    <h1 class="hero-title">{{ typedText }}<span class="cursor">|</span></h1>
    <p class="hero-text" [class.visible]="showContent">
      Dijital dünyada fikirleri koda dönüştüren bir yazılım geliştiriciyim.
      Şu an Angular ve modern web teknolojileri üzerine çalışıyorum.
      Müzik dinlemeyi, oyun oynamayı ve yeni şeyler öğrenmeyi severim.
    </p>

    <div class="hero-actions" [class.visible]="showContent">
      <a routerLink="/about" class="btn-primary">
        Daha Fazlası
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </a>
    </div>
  </section>

</div>